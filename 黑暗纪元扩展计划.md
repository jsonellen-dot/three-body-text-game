# 黑暗纪元扩展计划

## 架构变更

### 当前流程
```
威慑纪元 (deterrence_era_3)
  ├─ 选择1-5 → 广播纪元 (broadcast_era_1)
  └─ 选择6 → 胜利纪元 (victory_era_1)
```

### 新增流程
```
威慑纪元 (deterrence_era_3)
  ├─ 选择1-5 → 广播纪元 (broadcast_era_1)
  ├─ 选择6 → 胜利纪元 (victory_era_1)
  └─ 选择7 → 黑暗纪元 (dark_era_1)  ← 新增
```

---

## 黑暗纪元详细设计

### 触发条件
- 威慑纪元中选择了软弱的执剑人（程心）
- 或者积分：morality > 15 且 aggression < 5（过于理想主义）

### 节点结构

#### dark_era_1: 威慑崩溃
**剧情：**
```
公元2270年，程心成为执剑人。

三体舰队突然加速，智子发出最后通牒。
程心面对按钮，手指颤抖。

她想起了那些无辜的三体孩子...
她无法按下毁灭两个世界的按钮。

威慑失败。

三体舰队抵达地球轨道。
水滴摧毁了所有引力波发射器。
人类的最后防线崩溃。

三体人开始殖民地球。
```

**选择：**
1. 【撤退澳洲】组织残余力量撤往澳大利亚
   → dark_era_2_australia
   
2. 【火星基地】逃往火星殖民地
   → dark_era_2_mars
   
3. 【地下抵抗】在占领区建立地下组织
   → dark_era_2_underground
   
4. 【投降合作】接受三体统治，寻求生存空间
   → dark_era_2_collaboration
   
5. 【绝望反击】孤注一掷发动自杀式攻击
   → 结局：人类灭绝

---

#### dark_era_2_australia: 澳洲保留区
**剧情：**
```
三体人将人类驱赶到澳大利亚。

这是人类最后的保留区：
- 面积：770万平方公里
- 人口：30亿（全球幸存者）
- 资源：严重短缺
- 监控：智子无处不在

三体人占领了亚洲、欧洲、美洲、非洲。
地球的资源被疯狂开采，运往三体世界。

在澳洲，人类像牲畜一样被圈养。
每天都有人饿死、病死、绝望自杀。

但在绝望中，有人开始密谋反抗...
```

**选择：**
1. 【窃取技术】潜入三体工厂，窃取飞船技术
   → dark_era_3_tech_theft
   
2. 【生物战】研发针对三体人的生物武器
   → dark_era_3_biowar
   
3. 【外交谈判】尝试与三体温和派接触
   → dark_era_3_diplomacy
   
4. 【苟且偷生】放弃抵抗，接受现实
   → 结局：人类保留区（永久奴役）

---

#### dark_era_2_mars: 火星最后防线
**剧情：**
```
火星殖民地成为人类最后的自由领土。

这里有：
- 人口：500万（精英和幸运儿）
- 资源：有限但自给自足
- 防御：三体舰队尚未抵达
- 时间：最多还有5年

火星总督召开紧急会议：
"我们是人类文明的最后火种。
但三体舰队很快就会到来。
我们必须做出选择..."
```

**选择：**
1. 【建造战舰】用火星资源建造逃亡舰队
   → dark_era_3_mars_fleet
   
2. 【地下城市】在火星地下建立永久避难所
   → dark_era_3_mars_bunker
   
3. 【主动出击】趁三体舰队未到，反攻地球
   → dark_era_3_mars_attack
   
4. 【自我毁灭】引爆火星核武库，与三体同归于尽
   → 结局：火星殉难

---

#### dark_era_2_underground: 地下抵抗
**剧情：**
```
你选择留在占领区，建立地下抵抗组织。

在上海的废墟下，在北京的地铁中，
在纽约的下水道里，在伦敦的地堡中...

人类抵抗者像老鼠一样生存。

智子无处不在，但人类学会了反侦察：
- 用古老的密码通信
- 在屏蔽室中开会
- 用机械装置而非电子设备

抵抗组织的目标：
破坏三体的殖民设施，拖延他们的进度。
```

**选择：**
1. 【破坏行动】炸毁三体的资源运输线
   → dark_era_3_sabotage
   
2. 【情报战】渗透三体管理层，窃取情报
   → dark_era_3_espionage
   
3. 【联合起义】联络全球抵抗组织，发动总起义
   → dark_era_3_uprising
   
4. 【被捕叛变】行动失败，被迫成为三体走狗
   → 结局：叛徒的下场

---

#### dark_era_2_collaboration: 维希政府
**剧情：**
```
你选择了合作。

三体人建立了"地球临时政府"：
- 由人类精英组成
- 负责管理人类保留区
- 协助三体人维持秩序

你成为了政府高官。

三体人承诺：
"只要人类配合，我们会给予基本生存权。
反抗只会带来毁灭。"

但你心里清楚：
这是饮鸩止渴。
三体人最终会榨干地球的一切。

你必须在合作中寻找机会...
```

**选择：**
1. 【暗中准备】利用职权暗中帮助抵抗组织
   → dark_era_3_double_agent
   
2. 【彻底投降】真心为三体人服务，换取特权
   → 结局：人奸的荣华富贵
   
3. 【刺杀行动】刺杀三体高层，以死明志
   → 结局：烈士

---

## 第三阶段：流浪纪元

### wanderer_era_1: 技术窃取成功
**剧情：**
```
【从 dark_era_3_tech_theft 进入】

经过三年的潜伏，抵抗组织成功了！

从三体工厂窃取的技术包括：
- 曲率驱动引擎设计图
- 反物质能源技术
- 生命维持系统

在澳洲内陆的秘密基地，
人类工程师夜以继日地工作。

五年后，第一艘人类战舰"流浪者号"建成。

但三体人发现了基地...
```

**选择：**
1. 【立即起飞】带着未完成的舰队逃离
   → wanderer_era_2_escape
   
2. 【死守基地】掩护更多人登船
   → wanderer_era_2_sacrifice
   
3. 【反击三体】用新战舰攻击三体舰队
   → wanderer_era_2_counterattack

---

### wanderer_era_2_escape: 大逃亡
**剧情：**
```
舰队起飞了！

50艘战舰，载着100万人类幸存者。
这是人类文明的最后火种。

三体舰队追击而来。

舰队指挥官下令：
"启动曲率驱动！目标：半人马座α星以外！"

战舰加速，突破光速...

身后，地球越来越小。
那是人类的故乡，但已经不再属于人类。

前方，是无尽的黑暗和未知...
```

**选择：**
1. 【寻找新家园】前往适居星球
   → 结局：新人类文明
   
2. 【游击战】在星际间打游击，骚扰三体
   → 结局：星际游击队
   
3. 【回归地球】积蓄力量，百年后反攻
   → 结局：复仇之战

---

### wanderer_era_2_counterattack: 绝地反击
**剧情：**
```
"我们不逃！"

舰队指挥官的声音在通讯频道中回荡：
"人类在地球生存了200万年，
我们不会像老鼠一样逃走！

所有战舰，目标：三体旗舰！
为了地球，为了人类，冲锋！"

50艘战舰 vs 1000艘三体战舰。

这是一场必败的战斗。
但人类选择了尊严。
```

**选择：**
1. 【同归于尽】引爆反物质炸弹
   → 结局：壮烈牺牲
   
2. 【奇迹发生】战舰性能超出预期，击败三体
   → 结局：地球光复（低概率）

---

## 其他剧情分支建议

### 3. 科技突破路线
**dark_era_3_biowar → plague_era_1**
- 生物武器成功，三体人大量死亡
- 但病毒变异，也威胁人类
- 进入"瘟疫纪元"

### 4. 外交路线
**dark_era_3_diplomacy → coexist_era_1**
- 发现三体内部有温和派
- 温和派帮助人类建立自治区
- 进入"共存纪元"

### 5. 时间旅行路线
**dark_era_3_sabotage → timeloop_era_1**
- 破坏三体的时间实验装置
- 意外触发时间回溯
- 回到威慑纪元，重新选择

---

## 结局统计

### 黑暗纪元新增结局
1. **人类灭绝** - 绝望反击失败
2. **人类保留区** - 永久奴役
3. **火星殉难** - 自我毁灭
4. **叛徒的下场** - 被抵抗组织处决
5. **人奸的荣华富贵** - 出卖人类换取特权
6. **烈士** - 刺杀三体高层失败

### 流浪纪元新增结局
7. **新人类文明** - 在新星球重建
8. **星际游击队** - 永远的流浪者
9. **复仇之战** - 百年后反攻地球
10. **壮烈牺牲** - 与三体同归于尽
11. **地球光复** - 奇迹般击败三体（隐藏结局）

### 其他路线结局
12. **瘟疫纪元** - 生物战后果
13. **共存纪元** - 与三体温和派共存
14. **时间回溯** - 重新选择（隐藏）

---

## 实施计划

### 第一步：创建 dark.py
- 文件大小预估：300-400 行
- 包含：dark_era_1, dark_era_2_xxx (4个), dark_era_3_xxx (8个)

### 第二步：创建 wanderer.py
- 文件大小预估：200-300 行
- 包含：wanderer_era_1, wanderer_era_2_xxx (3个)

### 第三步：修改 deterrence.py
- 在 deterrence_era_3 增加第7个选择
- 触发条件：morality > 15 或特定选择组合

### 第四步：更新 endings.py
- 添加 14 个新结局
- 更新 calculate_ending 逻辑

---

## 文件结构
```
eras/
  ├─ deterrence.py    (修改：+1个选择)
  ├─ dark.py          (新建：300-400行)
  ├─ wanderer.py      (新建：200-300行)
  └─ endings.py       (修改：+14个结局)
```

---

## 积分影响

### 黑暗纪元积分变化
- 澳洲路线：survival +5
- 火星路线：technology +5
- 地下抵抗：aggression +5
- 合作路线：morality -5, survival +3

### 流浪纪元积分变化
- 逃亡路线：survival +10
- 反击路线：aggression +10, morality +5

---

这个计划怎么样？要我开始实施吗？
